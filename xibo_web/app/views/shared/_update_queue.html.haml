- updates = XiboUpdateQueue.all_updates
- if updates.any?
  %aside#update-queue
    %h3 
      Update Queue
      %span#queue-processor-status â—‹ Idle
    %ul
      - updates.each do |update|
        %li{class: update[:failed] ? 'failed' : 'pending', title: update[:failed] ? update[:failure_reason] : nil}
          %strong= "#{update[:method]} #{update[:entity_type]} ##{update[:entity_id]}"
          %span.timestamp= Time.parse(update[:enqueued_at]).strftime('%H:%M:%S')
          - if update[:failed]
            %span.status{title: update[:failure_reason]}
              Failed
              - if update[:retry_count] && update[:retry_count] > 1
                = "(#{update[:retry_count]}x)"
            = button_to 'Retry', retry_update_path(filename: update[:filename]), method: :post
            = button_to 'Delete', delete_update_path(filename: update[:filename]), method: :delete
          - else
            %span.status Pending
